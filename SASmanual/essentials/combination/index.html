
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Learning How to Program in SAS">
      
      
      
        <meta name="author" content="LucÃ­a Rodrigo Insausti">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.6.2">
    
    
      
        <title>Combining SAS Data Sets - SAS Manual</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-e2807e330f.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="SAS Manual" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  The Essentials
                </span>
              
            
            Combining SAS Data Sets
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    SAS Manual
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Gettin' Started!" class="md-nav__link">
      Gettin' Started!
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      The Essentials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        The Essentials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../accessing/" title="Accessing Data" class="md-nav__link">
      Accessing Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reporting/" title="Producing Detailed Reports" class="md-nav__link">
      Producing Detailed Reports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../formatting/" title="Formatting Data Values" class="md-nav__link">
      Formatting Data Values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reading-sas/" title="Reading SAS Data Sets" class="md-nav__link">
      Reading SAS Data Sets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reading-spreadsheets/" title="Reading Spreadsheet and Database Data" class="md-nav__link">
      Reading Spreadsheet and Database Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reading-raw/" title="Reading Raw Data Files" class="md-nav__link">
      Reading Raw Data Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../manipulation/" title="Manipulating Data" class="md-nav__link">
      Manipulating Data
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Combining SAS Data Sets
      </label>
    
    <a href="./" title="Combining SAS Data Sets" class="md-nav__link md-nav__link--active">
      Combining SAS Data Sets
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concatenating-data-sets" title="Concatenating Data Sets" class="md-nav__link">
    Concatenating Data Sets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merging-sas-data-sets-one-to-one" title="Merging SAS Data Sets One-to-One" class="md-nav__link">
    Merging SAS Data Sets One-to-One
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merging-sas-data-sets-one-to-many" title="Merging SAS Data Sets One-to-Many" class="md-nav__link">
    Merging SAS Data Sets One-to-Many
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merging-sas-data-sets-that-have-non-matches" title="Merging SAS Data Sets that Have Non-Matches" class="md-nav__link">
    Merging SAS Data Sets that Have Non-Matches
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../summary/" title="Creating Summary Reports" class="md-nav__link">
      Creating Summary Reports
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Basic Statistics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Basic Statistics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/anova/" title="Analysis of Variance (ANOVA)" class="md-nav__link">
      Analysis of Variance (ANOVA)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/regression/" title="Regression" class="md-nav__link">
      Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/inference/" title="Model Post-Fitting for Inference" class="md-nav__link">
      Model Post-Fitting for Inference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/categorical-data/" title="Categorical Data Analysis" class="md-nav__link">
      Categorical Data Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/prediction/" title="Model Building and Scoring for Prediction" class="md-nav__link">
      Model Building and Scoring for Prediction
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      SAS outputs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        SAS outputs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/reports/" title="Reports" class="md-nav__link">
      Reports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/graphs/" title="Graphs and Plots" class="md-nav__link">
      Graphs and Plots
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../missing_data/" title="Dealing with Missing Data" class="md-nav__link">
      Dealing with Missing Data
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../macros/" title="Using Macros" class="md-nav__link">
      Using Macros
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../miscellanea/" title="Miscellanea" class="md-nav__link">
      Miscellanea
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concatenating-data-sets" title="Concatenating Data Sets" class="md-nav__link">
    Concatenating Data Sets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merging-sas-data-sets-one-to-one" title="Merging SAS Data Sets One-to-One" class="md-nav__link">
    Merging SAS Data Sets One-to-One
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merging-sas-data-sets-one-to-many" title="Merging SAS Data Sets One-to-Many" class="md-nav__link">
    Merging SAS Data Sets One-to-Many
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merging-sas-data-sets-that-have-non-matches" title="Merging SAS Data Sets that Have Non-Matches" class="md-nav__link">
    Merging SAS Data Sets that Have Non-Matches
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Combining SAS Data Sets</h1>
                
                <p><a href="https://support.sas.com/edu/OLTRN/ECPRG193/m421/m421_5_a_sum.htm">Chapter summary in SAS</a></p>
<h2 id="concatenating-data-sets">Concatenating Data Sets<a class="headerlink" href="#concatenating-data-sets" title="Permanent link">&para;</a></h2>
<p><strong><em>Combine files vertically by concatenating</em></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>DATA SAS-data-set;
    SET SAS-data-set1 SAS-data-set2 ...;
RUN;
</pre></div>
</td></tr></table>

<p><strong><em>Combine two different variables that are actually the same one</em></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>DATA SAS-data-set;
    SET SAS-data-set1 (RENAME=(old-name1 = new-name1 old-name2 = new-name2)) SAS-data-set2 ...;
RUN;
</pre></div>
</td></tr></table>

<ul>
<li>The name change affects the PDV and the output data set, but has no effect on the input data set</li>
<li>The <strong>variable attributes</strong> are assigned from the <strong>first data set</strong> in the SET statement</li>
<li>You will get an <strong>error</strong> in the DATA step if a variable is defined with <strong>different data types</strong> in the files that you are trying to concatenate</li>
</ul>
<h2 id="merging-sas-data-sets-one-to-one">Merging SAS Data Sets One-to-One<a class="headerlink" href="#merging-sas-data-sets-one-to-one" title="Permanent link">&para;</a></h2>
<p><strong><em>Combine files horizontally by merging</em></strong></p>
<ul>
<li>The <strong>match-merging</strong> is a process based on the values of common variables</li>
<li>Data sets are merged in the order that they appear in the MERGE statement</li>
<li>You may need to <strong>SORT</strong> the files by the <strong>BY-variable(s)</strong> before merging the files</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>DATA SAS-data-set;
    MERGE SAS-data-set1 (RENAME=(old-name1 = new-name1 ...)) SAS-data-set2 ...;
    BY &lt;DESCENDING&gt; BY-variable(s);
    &lt;additional SAS statements&gt;
RUN;
</pre></div>
</td></tr></table>

<ul>
<li>In a <strong>one-to-one</strong> relationship, a single observastion in one data set is related to one, and only one, observation in another data set based on the values of one or more common variables</li>
<li>In a <strong>one-to-many</strong> relationship, a single observation in one data set is related to one or more observations in another data set</li>
<li>In a <strong>many-to-one</strong> relationship, multiple observations in one data set are related to one observation in another data set</li>
<li>In a <strong>many-to-many</strong> relationship, multiple observations in one data set are related to multiple observations in another data set</li>
<li>Sometimes the data sets have <strong>non-matches</strong>: at least one observation in one of the data sets is unrelated to any observation in another data set based on the values of one or more common variables</li>
</ul>
<h2 id="merging-sas-data-sets-one-to-many">Merging SAS Data Sets One-to-Many<a class="headerlink" href="#merging-sas-data-sets-one-to-many" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>DATA SAS-data-set;
    MERGE SAS-data-set1 SAS-data-set2 ...;
    BY &lt;DESCENDING&gt; BY-variable(s);
    &lt;additional SAS statements&gt;
RUN;
</pre></div>
</td></tr></table>

<p><em>In a <strong>one-to-many merge</strong>, does it matter which data set is listed first in the MERGE statement?</em></p>
<p>When you reverse the order of the data sets in the MERGE statement, the results are the same, but the order of the variables is different. SAS performs a <strong>many-to-one merge</strong>.</p>
<hr />
<p><strong>MERGENOBY</strong> (= NOWARN (default) | WARN | ERROR) controls whether a message is issued when MERGE processing occurs without an associated BY statement</p>
<ul>
<li>Performing a merge without a BY statement merges the observations based on their positions</li>
<li>This is almost never done intentionally and can lead to unexpected results</li>
</ul>
<h2 id="merging-sas-data-sets-that-have-non-matches">Merging SAS Data Sets that Have Non-Matches<a class="headerlink" href="#merging-sas-data-sets-that-have-non-matches" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>DATA SAS-data-set;
    MERGE SAS-data-set1 SAS-data-set2 ...;
    BY &lt;DESCENDING&gt; BY-variable(s);
    &lt;additional SAS statements&gt;
RUN;
</pre></div>
</td></tr></table>

<ul>
<li>After the merging, the output data set contains <strong>both matches and non-matches</strong></li>
<li>You want the new data set to contain only the observations that match across the input data sets, and not those ones that are missing in one of the data sets that you are merging</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>DATA SAS-data-set;
    MERGE SAS-data-set1 (IN=variable1) 
          SAS-data-set2 (IN=variable2) ...;
    BY &lt;DESCENDING&gt; BY-variable(s);
    &lt;additional SAS statements&gt;
RUN;
</pre></div>
</td></tr></table>

<ul>
<li>When you spefify the <strong>IN</strong> option after an input data set in the MERGE statement, SAS creates a <strong>temporary numeric variable</strong> that indicates whether the data set contributed data to the current observation (0 = it did not contribute to the current observation, 1 = it did contribute)</li>
<li>These variables are only available <strong>during execution</strong></li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>DATA SAS-data-set;
    MERGE SAS-data-set1 (IN=variable1) 
          SAS-data-set2 (IN=variable2) ...;
    BY &lt;DESCENDING&gt; BY-variable(s);
    IF variable1 = 1 and variable2 = 1;     /* write only matches */
    &lt;additional SAS statements&gt;
RUN;
</pre></div>
</td></tr></table>

<ul>
<li><strong><em>Matches</em></strong></li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>IF variable1 = 1 and variable2 = 1 
IF variable1 and variable2
</pre></div>
</td></tr></table>

<ul>
<li><strong><em>Non-matches from either data set</em></strong></li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>IF variable1 = 0 or not variable2 = 0
IF not variable1 or not variable2`
</pre></div>
</td></tr></table>

<p><strong><em>E.g.:</em></strong><br></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>DATA SAS-new-data-set1 SAS-new-data-set2;
    MERGE SAS-data-set1 (in=var1) SAS-data-set2 (in=var2);
    BY BY-variable(s);
    IF var2 THEN OUTPUT SAS-new-data-set1;
    ELSE IF var1 and not var2 THEN OUTPUT SAS-new-data-set2;
    KEEP variable1 variable2 variable5 variable8;
run;
</pre></div>
</td></tr></table>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../manipulation/" title="Manipulating Data" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Manipulating Data
              </span>
            </div>
          </a>
        
        
          <a href="../summary/" title="Creating Summary Reports" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Creating Summary Reports
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-6b599127bc.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
      
        <script src="../../js/mathjaxhelper.js"></script>
      
    
    
      
    
  </body>
</html>