
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Learning How to Program in SAS">
      
      
      
        <meta name="author" content="LucÃ­a Rodrigo Insausti">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.8.1">
    
    
      
        <title>Reactive programming - SAS Manual</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-bfecc7305d.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="SAS Manual" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  R with Shiny
                </span>
              
            
            Reactive programming
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    SAS Manual
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Gettin' Started!" class="md-nav__link">
      Gettin' Started!
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      The Essentials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        The Essentials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/accessing/" title="Accessing Data" class="md-nav__link">
      Accessing Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/reporting/" title="Producing Detailed Reports" class="md-nav__link">
      Producing Detailed Reports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/formatting/" title="Formatting Data Values" class="md-nav__link">
      Formatting Data Values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/reading-sas/" title="Reading SAS Data Sets" class="md-nav__link">
      Reading SAS Data Sets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/reading-spreadsheets/" title="Reading Spreadsheet and Database Data" class="md-nav__link">
      Reading Spreadsheet and Database Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/reading-raw/" title="Reading Raw Data Files" class="md-nav__link">
      Reading Raw Data Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/manipulation/" title="Manipulating Data" class="md-nav__link">
      Manipulating Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/combination/" title="Combining SAS Data Sets" class="md-nav__link">
      Combining SAS Data Sets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/summary/" title="Creating Summary Reports" class="md-nav__link">
      Creating Summary Reports
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Basic Statistics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Basic Statistics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/anova/" title="Analysis of Variance (ANOVA)" class="md-nav__link">
      Analysis of Variance (ANOVA)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/regression/" title="Regression" class="md-nav__link">
      Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/inference/" title="Model Post-Fitting for Inference" class="md-nav__link">
      Model Post-Fitting for Inference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/categorical-data/" title="Categorical Data Analysis" class="md-nav__link">
      Categorical Data Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/prediction/" title="Model Building and Scoring for Prediction" class="md-nav__link">
      Model Building and Scoring for Prediction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../statistics/miscellanea/" title="Miscellanea" class="md-nav__link">
      Miscellanea
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Other Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Other Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/model-selection/" title="Model Selection" class="md-nav__link">
      Model Selection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/missing-data/" title="Dealing with Missing Data" class="md-nav__link">
      Dealing with Missing Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/interim-analysis/" title="Interim Analysis Design" class="md-nav__link">
      Interim Analysis Design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/normality-tests/" title="Normality Tests" class="md-nav__link">
      Normality Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/effect-size/" title="Effect Size" class="md-nav__link">
      Effect Size
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/propensity-score/" title="Propensity Score" class="md-nav__link">
      Propensity Score
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/roc-curve/" title="ROC Curve" class="md-nav__link">
      ROC Curve
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/sequence-design/" title="Sequence Design" class="md-nav__link">
      Sequence Design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/survival-analysis/" title="Survival Analysis" class="md-nav__link">
      Survival Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/orr-dcr/" title="ORR and DCR" class="md-nav__link">
      ORR and DCR
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/clustering/" title="Clustering" class="md-nav__link">
      Clustering
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Using Macros
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Using Macros
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../macros/introducing-macrovar/" title="Introducing Macro Variables" class="md-nav__link">
      Introducing Macro Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macros/using-macrofunc/" title="Using Macro Functions" class="md-nav__link">
      Using Macro Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macros/macrovar-at-execution-time/" title="Creating Macro Variables at Execution Time" class="md-nav__link">
      Creating Macro Variables at Execution Time
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macros/macroprog/" title="Creating and Using Macro Programs" class="md-nav__link">
      Creating and Using Macro Programs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macros/macroprog-processing/" title="Using Conditional and Iterative Processing in Macro Programs" class="md-nav__link">
      Using Conditional and Iterative Processing in Macro Programs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macros/debugging-options/" title="Debugging Options" class="md-nav__link">
      Debugging Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../macros/more-macro/" title="More on Macro Programming" class="md-nav__link">
      More on Macro Programming
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Specific Procedures
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Specific Procedures
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../procedures/regression-models/" title="General Notes on Regression Procedures" class="md-nav__link">
      General Notes on Regression Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../procedures/glimmix/" title="PROC GLIMMIX" class="md-nav__link">
      PROC GLIMMIX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../procedures/mixed/" title="PROC MIXED" class="md-nav__link">
      PROC MIXED
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../procedures/sql/" title="PROC SQL" class="md-nav__link">
      PROC SQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      SAS Outputs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        SAS Outputs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/ods/" title="Output Delivery System" class="md-nav__link">
      Output Delivery System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/graphs/" title="Graphs and Plots" class="md-nav__link">
      Graphs and Plots
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/print/" title="PROC PRINT" class="md-nav__link">
      PROC PRINT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/report/" title="PROC REPORT" class="md-nav__link">
      PROC REPORT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/tabulate/" title="PROC TABULATE" class="md-nav__link">
      PROC TABULATE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/template/" title="PROC TEMPLATE" class="md-nav__link">
      PROC TEMPLATE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/pdf/" title="Write to pdf file" class="md-nav__link">
      Write to pdf file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/excel/" title="Export to Excel file" class="md-nav__link">
      Export to Excel file
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      SAS vs R
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        SAS vs R
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sasvsr/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sasvsr/importing-reporting/" title="Importing and Reporting Data" class="md-nav__link">
      Importing and Reporting Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sasvsr/variables-functions/" title="Creating New Variables, Functions and Data Tables" class="md-nav__link">
      Creating New Variables, Functions and Data Tables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sasvsr/random-plotting/" title="Random Number Generation and Plotting" class="md-nav__link">
      Random Number Generation and Plotting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sasvsr/proc-ods-macros/" title="Descriptive Procedures, Output Delivery System and Macros" class="md-nav__link">
      Descriptive Procedures, Output Delivery System and Macros
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sasvsr/inferential/" title="Analyzing the Data via Inferential Procedures" class="md-nav__link">
      Analyzing the Data via Inferential Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sasvsr/iml/" title="Interactive Matrix Language (IML)" class="md-nav__link">
      Interactive Matrix Language (IML)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sasvsr/bridge/" title="A Bridge Between SAS and R" class="md-nav__link">
      A Bridge Between SAS and R
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../wizard/" title="Using Wizard Menus" class="md-nav__link">
      Using Wizard Menus
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../sasvi/" title="SAS Visual Analytics" class="md-nav__link">
      SAS Visual Analytics
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      CDISC
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        CDISC
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../CDISC/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Miscellanea
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Miscellanea
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellanea/arrays/" title="Working with Arrays" class="md-nav__link">
      Working with Arrays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellanea/execution-time/" title="Execution time" class="md-nav__link">
      Execution time
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellanea/time-intervals/" title="Time intervals" class="md-nav__link">
      Time intervals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellanea/patient-identification/" title="Patient identification" class="md-nav__link">
      Patient identification
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Medical terms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Medical terms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../medical/general/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../medical/labs/" title="Laboratory test" class="md-nav__link">
      Laboratory test
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14" checked>
    
    <label class="md-nav__link" for="nav-14">
      R with Shiny
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        R with Shiny
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../introduction/" title="Introduction and Shiny basics" class="md-nav__link">
      Introduction and Shiny basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../input-output/" title="Inputs, outputs, and rendering functions" class="md-nav__link">
      Inputs, outputs, and rendering functions
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Reactive programming
      </label>
    
    <a href="./" title="Reactive programming" class="md-nav__link md-nav__link--active">
      Reactive programming
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reactive-elements" title="Reactive Elements" class="md-nav__link">
    Reactive Elements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-using-reactives" title="Why Using Reactives?" class="md-nav__link">
    Why Using Reactives?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#functions-vs-reactives" title="Functions vs Reactives" class="md-nav__link">
    Functions vs Reactives
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reactives-and-observers" title="Reactives and observers" class="md-nav__link">
    Reactives and observers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reactives-vs-observers" title="Reactives vs Observers" class="md-nav__link">
    Reactives vs Observers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stop-trigger-delay" title="Stop-Trigger-Delay" class="md-nav__link">
    Stop-Trigger-Delay
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isolating-reactions" title="Isolating Reactions" class="md-nav__link">
    Isolating Reactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggering-reactions" title="Triggering Reactions" class="md-nav__link">
    Triggering Reactions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reactivity-summary" title="Reactivity Summary" class="md-nav__link">
    Reactivity Summary
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom/" title="Customizing appearance" class="md-nav__link">
      Customizing appearance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reactive-elements" title="Reactive Elements" class="md-nav__link">
    Reactive Elements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-using-reactives" title="Why Using Reactives?" class="md-nav__link">
    Why Using Reactives?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#functions-vs-reactives" title="Functions vs Reactives" class="md-nav__link">
    Functions vs Reactives
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reactives-and-observers" title="Reactives and observers" class="md-nav__link">
    Reactives and observers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reactives-vs-observers" title="Reactives vs Observers" class="md-nav__link">
    Reactives vs Observers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stop-trigger-delay" title="Stop-Trigger-Delay" class="md-nav__link">
    Stop-Trigger-Delay
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isolating-reactions" title="Isolating Reactions" class="md-nav__link">
    Isolating Reactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggering-reactions" title="Triggering Reactions" class="md-nav__link">
    Triggering Reactions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reactivity-summary" title="Reactivity Summary" class="md-nav__link">
    Reactivity Summary
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Reactive programming</h1>
                
                <h2 id="reactive-elements">Reactive Elements<a class="headerlink" href="#reactive-elements" title="Permanent link">&para;</a></h2>
<p>There are three kinds of objects in reactive programming:</p>
<ul>
<li><strong>Reactive Sources</strong>: user input that comes through a browser interface, typically.</li>
<li><strong>Reactive Endpoints</strong>: something that appears in the user's browser window, such as a plot or a table of values. A reactive source can be connected to multiple endpoints, and vice versa.</li>
<li><strong>Reactive Conductors</strong>: reactive component between a source and an endpoint. It can be a dependetn (child) and have dependents (parent) while <strong>sources can only be parents</strong> and <strong>endpoints can only be children</strong></li>
</ul>
<p><img alt="Reactive element types" src="../../shiny-img/reactive-elements-types.PNG" title="Reactive element types" /></p>
<p>We can create a reactive data set using the <strong><code>reactive()</code></strong> function which creates a <strong>cached expression</strong> that knows it is out of date when input changes. Remember to check the availability of the predefined input with the <strong><code>req()</code></strong> function before doing any calculations that depends on it and surround the expression with curly braces. When you refer to a reactive data set you need to use parentheses after its name, that is, a cached expression, meaning that it only rerun when its inputs change.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>readr<span class="p">)</span>
<span class="kp">load</span><span class="p">(</span><span class="kp">url</span><span class="p">(</span><span class="s">&quot;http://s3.amazonaws.com/assets.datacamp.com/production/course_4850/datasets/movies.Rdata&quot;</span><span class="p">))</span>

<span class="c1"># UI</span>
ui <span class="o">&lt;-</span> fluidPage<span class="p">(</span>
  sidebarLayout<span class="p">(</span>

    <span class="c1"># Input(s)</span>
    sidebarPanel<span class="p">(</span>

      <span class="c1"># Select filetype</span>
      radioButtons<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;filetype&quot;</span><span class="p">,</span>
                   label <span class="o">=</span> <span class="s">&quot;Select filetype:&quot;</span><span class="p">,</span>
                   choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;csv&quot;</span><span class="p">,</span> <span class="s">&quot;tsv&quot;</span><span class="p">),</span>
                   selected <span class="o">=</span> <span class="s">&quot;csv&quot;</span><span class="p">),</span>

      <span class="c1"># Select variables to download</span>
      checkboxGroupInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;selected_var&quot;</span><span class="p">,</span>
                         label <span class="o">=</span> <span class="s">&quot;Select variables:&quot;</span><span class="p">,</span>
                         choices <span class="o">=</span> <span class="kp">names</span><span class="p">(</span>movies<span class="p">),</span>
                         selected <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">))</span>

    <span class="p">),</span>

    <span class="c1"># Output(s)</span>
    mainPanel<span class="p">(</span>
      DT<span class="o">::</span>dataTableOutput<span class="p">(</span>outputId <span class="o">=</span> <span class="s">&quot;moviestable&quot;</span><span class="p">),</span>
      downloadButton<span class="p">(</span><span class="s">&quot;download_data&quot;</span><span class="p">,</span> <span class="s">&quot;Download data&quot;</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Server</span>
server <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">)</span> <span class="p">{</span>

  <span class="c1"># Create reactive data frame</span>
  movies_selected <span class="o">&lt;-</span> reactive<span class="p">({</span>
    req<span class="p">(</span>input<span class="o">$</span>selected_var<span class="p">)</span>
    movies <span class="o">%&gt;%</span> select<span class="p">(</span>input<span class="o">$</span>selected_var<span class="p">)</span>
  <span class="p">})</span>

  <span class="c1"># Create data table</span>
  output<span class="o">$</span>moviestable <span class="o">&lt;-</span> DT<span class="o">::</span>renderDataTable<span class="p">({</span>
    req<span class="p">(</span>input<span class="o">$</span>selected_var<span class="p">)</span>
    DT<span class="o">::</span>datatable<span class="p">(</span>data <span class="o">=</span> movies_selected<span class="p">(),</span> 
                  options <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>pageLength <span class="o">=</span> <span class="m">10</span><span class="p">),</span> 
                  rownames <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
  <span class="p">})</span>

  <span class="c1"># Download file</span>
  output<span class="o">$</span>download_data <span class="o">&lt;-</span> downloadHandler<span class="p">(</span>
    filename <span class="o">=</span> <span class="kr">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;movies.&quot;</span><span class="p">,</span> input<span class="o">$</span>filetype<span class="p">)</span>
    <span class="p">},</span>
    content <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="kp">file</span><span class="p">)</span> <span class="p">{</span> 
      <span class="kr">if</span><span class="p">(</span>input<span class="o">$</span>filetype <span class="o">==</span> <span class="s">&quot;csv&quot;</span><span class="p">){</span> 
        write_csv<span class="p">(</span>movies_selected<span class="p">(),</span> <span class="kp">file</span><span class="p">)</span> 
      <span class="p">}</span>
      <span class="kr">if</span><span class="p">(</span>input<span class="o">$</span>filetype <span class="o">==</span> <span class="s">&quot;tsv&quot;</span><span class="p">){</span> 
        write_tsv<span class="p">(</span>movies_selected<span class="p">(),</span> <span class="kp">file</span><span class="p">)</span> 
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">)</span>

<span class="p">}</span>

<span class="c1"># Create a Shiny app object</span>
shinyApp<span class="p">(</span>ui <span class="o">=</span> ui<span class="p">,</span> server <span class="o">=</span> server<span class="p">)</span>
</pre></div>
</td></tr></table>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The obvious choice for creating a text output would be <code>renderText</code> but if you want to get a little fancier including some HTML to use some text decoration, like bolding and line breaks in the text output, we need a rendering function that generates HTML, which is <code>renderUI</code>.</p>
</div>
<p><img alt="reactive-data-set" src="../../shiny-img/reactive-data-set.png" title="Reactive data set" /></p>
<h2 id="why-using-reactives">Why Using Reactives?<a class="headerlink" href="#why-using-reactives" title="Permanent link">&para;</a></h2>
<p>By using a reactive expression for the subsetted data frame, we were able to get away with subsetting once and then using the result twice.</p>
<p>In general, reactive conductors let you not repeat yourself (i.e. avoid copy-and-paste code) and decompose large, complex calculations into smaller pieces to make them more understandable. This benefits are similar to decomposing a large complex R script into a series of small functions that build on each other.</p>
<h3 id="functions-vs-reactives">Functions vs Reactives<a class="headerlink" href="#functions-vs-reactives" title="Permanent link">&para;</a></h3>
<p>Each time you call a function, R will revaluate it. However, reactive expressions are lazy, they only get executed when their input changes. This means that even if you call a reactive expression multiple times, it only re-executes when its input(s) change(s).</p>
<p>Using many reactive expressions in your app can create a complicated dependency structure. The <strong><code>reactlog</code></strong> is a graphical representation of this dependency structure, and it also gives you very detailed information about what's happening under the hood as Shiny evaluates your application. To view the <strong><code>reactlog</code></strong>:</p>
<ul>
<li>In a fresh R session and run <code>options(shiny.reactlog = TRUE)</code> </li>
<li>Then, launch your app as you normally would</li>
<li>In the app, pres <strong>Ctrl+F3</strong></li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>tools<span class="p">)</span>
<span class="kp">load</span><span class="p">(</span><span class="kp">url</span><span class="p">(</span><span class="s">&quot;http://s3.amazonaws.com/assets.datacamp.com/production/course_4850/datasets/movies.Rdata&quot;</span><span class="p">))</span>

<span class="c1"># Define UI for application that plots features of movies</span>
ui <span class="o">&lt;-</span> fluidPage<span class="p">(</span>

  <span class="c1"># Application title</span>
  titlePanel<span class="p">(</span><span class="s">&quot;Movie browser&quot;</span><span class="p">),</span>

  <span class="c1"># Sidebar layout with a input and output definitions</span>
  sidebarLayout<span class="p">(</span>

    <span class="c1"># Inputs(s)</span>
    sidebarPanel<span class="p">(</span>

      <span class="c1"># Select variable for y-axis</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;y&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Y-axis:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IMDB rating&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;IMDB number of votes&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_num_votes&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Score&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Score&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Runtime&quot;</span> <span class="o">=</span> <span class="s">&quot;runtime&quot;</span><span class="p">),</span> 
                  selected <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">),</span>

      <span class="c1"># Select variable for x-axis</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;X-axis:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IMDB rating&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;IMDB number of votes&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_num_votes&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Score&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Score&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Runtime&quot;</span> <span class="o">=</span> <span class="s">&quot;runtime&quot;</span><span class="p">),</span> 
                  selected <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">),</span>

      <span class="c1"># Select variable for color</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;z&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Color by:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Title Type&quot;</span> <span class="o">=</span> <span class="s">&quot;title_type&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Genre&quot;</span> <span class="o">=</span> <span class="s">&quot;genre&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;MPAA Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;mpaa_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_rating&quot;</span><span class="p">),</span>
                  selected <span class="o">=</span> <span class="s">&quot;mpaa_rating&quot;</span><span class="p">),</span>

      <span class="c1"># Enter text for plot title</span>
      textInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;plot_title&quot;</span><span class="p">,</span> 
                label <span class="o">=</span> <span class="s">&quot;Plot title&quot;</span><span class="p">,</span> 
                placeholder <span class="o">=</span> <span class="s">&quot;Enter text for plot title&quot;</span><span class="p">),</span>

      <span class="c1"># Select which types of movies to plot</span>
      checkboxGroupInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;selected_type&quot;</span><span class="p">,</span>
                         label <span class="o">=</span> <span class="s">&quot;Select movie type(s):&quot;</span><span class="p">,</span>
                         choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Documentary&quot;</span><span class="p">,</span> <span class="s">&quot;Feature Film&quot;</span><span class="p">,</span> <span class="s">&quot;TV Movie&quot;</span><span class="p">),</span>
                         selected <span class="o">=</span> <span class="s">&quot;Feature Film&quot;</span><span class="p">)</span>

    <span class="p">),</span>

    <span class="c1"># Output(s)</span>
    mainPanel<span class="p">(</span>
      plotOutput<span class="p">(</span>outputId <span class="o">=</span> <span class="s">&quot;scatterplot&quot;</span><span class="p">),</span>
      textOutput<span class="p">(</span>outputId <span class="o">=</span> <span class="s">&quot;description&quot;</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Server</span>
server <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">)</span> <span class="p">{</span>

  <span class="c1"># Create a subset of data filtering for selected title types</span>
  movies_subset <span class="o">&lt;-</span> reactive<span class="p">({</span>
    req<span class="p">(</span>input<span class="o">$</span>selected_type<span class="p">)</span>
    filter<span class="p">(</span>movies<span class="p">,</span> title_type <span class="o">%in%</span> input<span class="o">$</span>selected_type<span class="p">)</span>
  <span class="p">})</span>

  <span class="c1"># Convert plot_title toTitleCase</span>
  pretty_plot_title <span class="o">&lt;-</span> reactive<span class="p">({</span>
    toTitleCase<span class="p">(</span>input<span class="o">$</span>plot_title<span class="p">)</span>
  <span class="p">})</span>

  <span class="c1"># Create scatterplot object the plotOutput function is expecting</span>
  output<span class="o">$</span>scatterplot <span class="o">&lt;-</span> renderPlot<span class="p">({</span>
    ggplot<span class="p">(</span>data <span class="o">=</span> movies_subset<span class="p">(),</span> 
           aes_string<span class="p">(</span>x <span class="o">=</span> input<span class="o">$</span>x<span class="p">,</span> y <span class="o">=</span> input<span class="o">$</span>y<span class="p">,</span> color <span class="o">=</span> input<span class="o">$</span>z<span class="p">))</span> <span class="o">+</span>
      geom_point<span class="p">()</span> <span class="o">+</span>
      labs<span class="p">(</span>title <span class="o">=</span> pretty_plot_title<span class="p">())</span>
  <span class="p">})</span>

  <span class="c1"># Create descriptive text</span>
  output<span class="o">$</span>description <span class="o">&lt;-</span> renderText<span class="p">({</span>
    <span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;The plot above titled &#39;&quot;</span><span class="p">,</span> pretty_plot_title<span class="p">(),</span> <span class="s">&quot;&#39; visualizes the relationship between &quot;</span><span class="p">,</span> input<span class="o">$</span>x<span class="p">,</span> <span class="s">&quot; and &quot;</span><span class="p">,</span> input<span class="o">$</span>y<span class="p">,</span> <span class="s">&quot;, conditional on &quot;</span><span class="p">,</span> input<span class="o">$</span>z<span class="p">,</span> <span class="s">&quot;.&quot;</span><span class="p">)</span>
  <span class="p">})</span>

<span class="p">}</span>

<span class="c1"># Create the Shiny app object</span>
shinyApp<span class="p">(</span>ui <span class="o">=</span> ui<span class="p">,</span> server <span class="o">=</span> server<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="Reactive Elements" src="../../shiny-img/reactive-elements.PNG" title="Reactive Elements" /></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="kp">load</span><span class="p">(</span><span class="kp">url</span><span class="p">(</span><span class="s">&quot;http://s3.amazonaws.com/assets.datacamp.com/production/course_4850/datasets/movies.Rdata&quot;</span><span class="p">))</span>

<span class="c1"># UI</span>
ui <span class="o">&lt;-</span> fluidPage<span class="p">(</span>
  sidebarLayout<span class="p">(</span>

    <span class="c1"># Input(s)</span>
    sidebarPanel<span class="p">(</span>

      <span class="c1"># Select variable for y-axis</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;y&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Y-axis:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IMDB rating&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;IMDB number of votes&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_num_votes&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Score&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Score&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Runtime&quot;</span> <span class="o">=</span> <span class="s">&quot;runtime&quot;</span><span class="p">),</span> 
                  selected <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">),</span>

      <span class="c1"># Select variable for x-axis</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;X-axis:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IMDB rating&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;IMDB number of votes&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_num_votes&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Score&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Score&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Runtime&quot;</span> <span class="o">=</span> <span class="s">&quot;runtime&quot;</span><span class="p">),</span> 
                  selected <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">),</span>

      <span class="c1"># Select variable for color</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;z&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Color by:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Title Type&quot;</span> <span class="o">=</span> <span class="s">&quot;title_type&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Genre&quot;</span> <span class="o">=</span> <span class="s">&quot;genre&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;MPAA Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;mpaa_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_rating&quot;</span><span class="p">),</span>
                  selected <span class="o">=</span> <span class="s">&quot;mpaa_rating&quot;</span><span class="p">),</span>

      <span class="c1"># Select which types of movies to plot</span>
      checkboxGroupInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;selected_type&quot;</span><span class="p">,</span>
                         label <span class="o">=</span> <span class="s">&quot;Select movie type(s):&quot;</span><span class="p">,</span>
                         choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Documentary&quot;</span><span class="p">,</span> <span class="s">&quot;Feature Film&quot;</span><span class="p">,</span> <span class="s">&quot;TV Movie&quot;</span><span class="p">),</span>
                         selected <span class="o">=</span> <span class="s">&quot;Feature Film&quot;</span><span class="p">),</span>

      <span class="c1"># Select sample size</span>
      numericInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;n_samp&quot;</span><span class="p">,</span> 
                   label <span class="o">=</span> <span class="s">&quot;Sample size:&quot;</span><span class="p">,</span> 
                   min <span class="o">=</span> <span class="m">1</span><span class="p">,</span> max <span class="o">=</span> <span class="kp">nrow</span><span class="p">(</span>movies<span class="p">),</span> 
                   value <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
    <span class="p">),</span>

    <span class="c1"># Output(s)</span>
    mainPanel<span class="p">(</span>
      plotOutput<span class="p">(</span>outputId <span class="o">=</span> <span class="s">&quot;scatterplot&quot;</span><span class="p">),</span>
      uiOutput<span class="p">(</span>outputId <span class="o">=</span> <span class="s">&quot;n&quot;</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Server</span>
server <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">)</span> <span class="p">{</span>

  <span class="c1"># Create a subset of data filtering for selected title types</span>
  movies_subset <span class="o">&lt;-</span> reactive<span class="p">({</span>
    req<span class="p">(</span>input<span class="o">$</span>selected_type<span class="p">)</span>
    filter<span class="p">(</span>movies<span class="p">,</span> title_type <span class="o">%in%</span> input<span class="o">$</span>selected_type<span class="p">)</span>
  <span class="p">})</span>

  <span class="c1"># Create new df that is n_samp obs from selected type movies</span>
  movies_sample <span class="o">&lt;-</span> reactive<span class="p">({</span> 
    req<span class="p">(</span>input<span class="o">$</span>n_samp<span class="p">)</span>
    sample_n<span class="p">(</span>movies_subset<span class="p">(),</span> input<span class="o">$</span>n_samp<span class="p">)</span>
  <span class="p">})</span>

  <span class="c1"># Create scatterplot object the plotOutput function is expecting</span>
  output<span class="o">$</span>scatterplot <span class="o">&lt;-</span> renderPlot<span class="p">({</span>
    ggplot<span class="p">(</span>data <span class="o">=</span> movies_sample<span class="p">(),</span> aes_string<span class="p">(</span>x <span class="o">=</span> input<span class="o">$</span>x<span class="p">,</span> y <span class="o">=</span> input<span class="o">$</span>y<span class="p">,</span> color <span class="o">=</span> input<span class="o">$</span>z<span class="p">))</span> <span class="o">+</span>
      geom_point<span class="p">()</span>
  <span class="p">})</span>

  <span class="c1"># Print number of movies plotted</span>
  output<span class="o">$</span>n <span class="o">&lt;-</span> renderUI<span class="p">({</span>
    types <span class="o">&lt;-</span> movies_sample<span class="p">()</span><span class="o">$</span>title_type <span class="o">%&gt;%</span> 
      <span class="kp">factor</span><span class="p">(</span>levels <span class="o">=</span> input<span class="o">$</span>selected_type<span class="p">)</span> 
    counts <span class="o">&lt;-</span> <span class="kp">table</span><span class="p">(</span>types<span class="p">)</span>
    HTML<span class="p">(</span><span class="kp">paste</span><span class="p">(</span><span class="s">&quot;There are&quot;</span><span class="p">,</span> counts<span class="p">,</span> input<span class="o">$</span>selected_type<span class="p">,</span> <span class="s">&quot;movies plotted in the plot above. &lt;br&gt;&quot;</span><span class="p">))</span>
  <span class="p">})</span>

<span class="p">}</span>

<span class="c1"># Create a Shiny app object</span>
shinyApp<span class="p">(</span>ui <span class="o">=</span> ui<span class="p">,</span> server <span class="o">=</span> server<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="Reactive Elements" src="../../shiny-img/reactive-elements2.PNG" title="Reactive Elements" /></p>
<h2 id="reactives-and-observers">Reactives and observers<a class="headerlink" href="#reactives-and-observers" title="Permanent link">&para;</a></h2>
<p>Here we discuss implementations of the three different types of reactive objects. As we go through the different implementations, it's recommended to think back to where they appear on the reactive flow chart.</p>
<p><img alt="Reactive Flow" src="../../shiny-img/reactive-flow.PNG" title="Reactive Flow" /></p>
<ul>
<li><strong>Implementation of Reactive Sources</strong>: An implementation of reactive sources is <strong><code>reactiveValues()</code></strong>. One example of this is user inputs. The input object is a reactive value that looks like a list and contains many individual reactive values that are set by input from the web browser.</li>
<li><strong>Implementation of Reactive</strong>: The implementation of reactive conductors is a <strong><code>reactive()</code></strong> expression that you can create with the reactive function. An example is the reactive data frame subsets created in the previous example. <ul>
<li>Reactive expressions can access reactive values or other reactive expressions and they return a value. </li>
<li>They are useful for caching the results of any procedure that happens in response to user input.</li>
</ul>
</li>
<li><strong>Implementation of Reactive</strong>: The implementation of reactive endpoints is <strong><code>observe()</code></strong>. For example, an output object is a reactive observer. Actually, under the hood, a render function returns a reactive expression, and when you assing this reactive expression to an output value, Shiny automatically creates an observer that uses the reactive expression. <ul>
<li>Observers can access reactive sources and reactive expressions, but they don't return a value.</li>
<li>Instead they are used for their side effects, which typically involves sending data to the web browser.</li>
</ul>
</li>
</ul>
<h3 id="reactives-vs-observers">Reactives vs Observers<a class="headerlink" href="#reactives-vs-observers" title="Permanent link">&para;</a></h3>
<ul>
<li>Similarities: they both store expressions that can be executed</li>
<li>Differences:<ul>
<li>Reactive expressions return values, but observers don't</li>
<li>Observers (and endpoints in general) eagerly respond to changes in their dependences, but reactive expressions (and conductors in general) do not</li>
<li>Reactive expressions must not have side effects, while observers are only useful for their side effects</li>
</ul>
</li>
<li>Most importantly:<ul>
<li>The <strong><code>reactive()</code></strong> function is used when calculating values, without side effects</li>
<li>The <strong><code>observe()</code></strong> function is used to perform actions, with side effects</li>
<li>Do not use an <strong><code>observe()</code></strong> function when calculating a value, and especially don't use <strong><code>reactive()</code></strong> for performing actions with side effects</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th><strong><code>reactive()</code></strong></th>
<th><strong><code>observe()</code></strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Purpose</strong></td>
<td>Calculations</td>
<td>Actions</td>
</tr>
<tr>
<td><strong>Side effects</strong></td>
<td>Forbidden</td>
<td>Allowed</td>
</tr>
</tbody>
</table>
<h2 id="stop-trigger-delay">Stop-Trigger-Delay<a class="headerlink" href="#stop-trigger-delay" title="Permanent link">&para;</a></h2>
<h3 id="isolating-reactions">Isolating Reactions<a class="headerlink" href="#isolating-reactions" title="Permanent link">&para;</a></h3>
<p>Suppose your app has an input widget where users can enter text for the title of the plot. However, you only want the title to update if any ot the other inputs that go into the plot change. You can achieve this by isolating the plot title such that when <code>input$x</code> or <code>input$y</code> changes, the plot, along with the title, will update. But when only the title input changes, the plot will not update.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>output<span class="o">$</span>scatterplot <span class="o">&lt;-</span> renderPlot<span class="p">({</span>
  ggplot<span class="p">(</span>data <span class="o">=</span> movies_subset<span class="p">(),</span> aes_string<span class="p">(</span>x <span class="o">=</span> input<span class="o">$</span>x<span class="p">,</span> y <span class="o">=</span> input<span class="o">$</span>y<span class="p">))</span> <span class="o">+</span> 
  geom_point<span class="p">()</span> <span class="o">+</span>
  labs<span class="p">(</span>title <span class="o">=</span> isolate<span class="p">({</span> input<span class="o">$</span>plot_title <span class="p">})</span> <span class="p">)</span>
<span class="p">})</span>
</pre></div>
</td></tr></table>

<p><code>isolate()</code> is then used to stop a reaction.</p>
<h3 id="triggering-reactions">Triggering Reactions<a class="headerlink" href="#triggering-reactions" title="Permanent link">&para;</a></h3>
<p>Why might one want to explicitly trigger a reaction? Somethimes you might want to wait for a specific action to be taken from the user, like clicking an <code>actionButton</code>, before calculating an expression or taking an action. A reactive value or expression that is used to trigger other calculations in this way is called an <strong>event</strong>. </p>
<p>These events can be the <strong>first argument</strong> in the <code>observeEvent</code> function. This arguments can be a simple reactive value like an input, a call to a reactive expression, or a complex expresion provided wrapped in curly braces. The <strong>second argument</strong> is the expression to call whenever the first argument is invalidated. This is similar to saying if event expression happens, call handler expression.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>observeEvent<span class="p">(</span>eventExpr<span class="p">,</span> handlerExpr<span class="p">,</span> <span class="kc">...</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Suppose your app allows for taking a random sample of the data based on a sample size numeric input. Suppose also that you want to add functionality for the userd to download the random sample they generated <em>if</em> they press an action button requesting to do so. In the UI we create an action button and in the server we condition the <code>observeEvent</code> on the <code>inputId</code> of that action button. This way R knows to call the expression given in the second argument of <code>observeEvent</code> when the user presses the action button. And finally we can delay reactions with <code>eventReactive</code>, which takes similar arguments as <code>observeEvent</code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># UI</span>
actionButton<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;write_csv&quot;</span><span class="p">,</span> label <span class="o">=</span> <span class="s">&quot;Write CSV&quot;</span><span class="p">)</span>

<span class="c1"># Server</span>
observeEvent<span class="p">(</span>input<span class="o">$</span>write_csv<span class="p">,</span> <span class="p">{</span>
            filename <span class="o">&lt;-</span> <span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;movies_&quot;</span><span class="p">,</span>
                               str_replace_all<span class="p">(</span><span class="kp">Sys.time</span><span class="p">(),</span> <span class="s">&quot;:|\ &quot;</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="p">),</span>
                               <span class="s">&quot;.csv&quot;</span><span class="p">)</span>
            write_csv<span class="p">(</span>movies_sample<span class="p">(),</span> path <span class="o">=</span> filename<span class="p">)</span>
            <span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Suppose your goal is to change how users take random samples in your app (you only want them to get a new sample when an action button that says "get new sample" is pressed, not when other things like numeric input defining the size of the sample changes). In the event reactive function, the first argument is the input associated with the action button and the second argument is the sampling code. Then we add one more argument, <code>ignoreNull</code>, which tells R what to do (or what not to do) when the event expression evaluates to Null. For example, what should the app do when the app is first launched and the user has not even interacted with the app yet? If this is set to FALSE, the app will initially perform the action or calculation and then the user can re-initiate it.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># UI</span>
actionButton<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;get_new_sample&quot;</span><span class="p">,</span> label <span class="o">=</span> <span class="s">&quot;Get new sample&quot;</span><span class="p">)</span>

<span class="c1"># Server</span>
movies_sample <span class="o">&lt;-</span> eventReactive<span class="p">(</span>input<span class="o">$</span>get_new_sample<span class="p">,</span> <span class="p">{</span>
            req<span class="p">(</span>input<span class="o">$</span>n_samp<span class="p">)</span>
            sample_n<span class="p">(</span>movies_subset<span class="p">(),</span> input<span class="o">$</span>n_samp<span class="p">)</span>
            <span class="p">},</span>
            ignoreNULL <span class="o">=</span> <span class="kc">FALSE</span>
<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><code>observeEvent()</code> and <code>eventReactive()</code> look and feel very similar. They have the same syntax, same arguments, but they're actually not the same at all!</p>
<ul>
<li><code>observeEvent()</code> is to perform an action in response to an event</li>
<li><code>eventReactive()</code> is used to create a calculated value that only updates in response to an event</li>
</ul>
<p>This pair of functions also seem similar to the observe/reactive pair, however, the main differences between them is that <code>observe()</code> and <code>reactive()</code> functions automatically trigger on whatever they access while <code>observeEvent()</code> and <code>eventReactive()</code> functions need to be explicitly told what triggers them.</p>
<p>In the following example <code>isolate()</code> is used to prevent the plot title to be updated until some of the other inputs are updated:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>tools<span class="p">)</span>
<span class="kp">load</span><span class="p">(</span><span class="kp">url</span><span class="p">(</span><span class="s">&quot;http://s3.amazonaws.com/assets.datacamp.com/production/course_4850/datasets/movies.Rdata&quot;</span><span class="p">))</span>

<span class="c1"># UI</span>
ui <span class="o">&lt;-</span> fluidPage<span class="p">(</span>
  sidebarLayout<span class="p">(</span>

    <span class="c1"># Input</span>
    sidebarPanel<span class="p">(</span>

      <span class="c1"># Select variable for y-axis</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;y&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Y-axis:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IMDB rating&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;IMDB number of votes&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_num_votes&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Score&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Score&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Runtime&quot;</span> <span class="o">=</span> <span class="s">&quot;runtime&quot;</span><span class="p">),</span> 
                  selected <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">),</span>

      <span class="c1"># Select variable for x-axis</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;X-axis:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IMDB rating&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;IMDB number of votes&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_num_votes&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Score&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Score&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Runtime&quot;</span> <span class="o">=</span> <span class="s">&quot;runtime&quot;</span><span class="p">),</span> 
                  selected <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">),</span>

      <span class="c1"># Select variable for color</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;z&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Color by:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Title Type&quot;</span> <span class="o">=</span> <span class="s">&quot;title_type&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Genre&quot;</span> <span class="o">=</span> <span class="s">&quot;genre&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;MPAA Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;mpaa_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_rating&quot;</span><span class="p">),</span>
                  selected <span class="o">=</span> <span class="s">&quot;mpaa_rating&quot;</span><span class="p">),</span>

      <span class="c1"># Set alpha level</span>
      sliderInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;alpha&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Alpha:&quot;</span><span class="p">,</span> 
                  min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">1</span><span class="p">,</span> 
                  value <span class="o">=</span> <span class="m">0.5</span><span class="p">),</span>

      <span class="c1"># Set point size</span>
      sliderInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;size&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Size:&quot;</span><span class="p">,</span> 
                  min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">5</span><span class="p">,</span> 
                  value <span class="o">=</span> <span class="m">2</span><span class="p">),</span>

      <span class="c1"># Enter text for plot title</span>
      textInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;plot_title&quot;</span><span class="p">,</span> 
                label <span class="o">=</span> <span class="s">&quot;Plot title&quot;</span><span class="p">,</span> 
                placeholder <span class="o">=</span> <span class="s">&quot;Enter text to be used as plot title&quot;</span><span class="p">)</span>

    <span class="p">),</span>

    <span class="c1"># Output:</span>
    mainPanel<span class="p">(</span>
      plotOutput<span class="p">(</span>outputId <span class="o">=</span> <span class="s">&quot;scatterplot&quot;</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Define server function required to create the scatterplot-</span>
server <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">,</span> session<span class="p">)</span> <span class="p">{</span>

  <span class="c1"># Create scatterplot object the plotOutput function is expecting </span>
  output<span class="o">$</span>scatterplot <span class="o">&lt;-</span> renderPlot<span class="p">({</span>
    ggplot<span class="p">(</span>data <span class="o">=</span> movies<span class="p">,</span> aes_string<span class="p">(</span>x <span class="o">=</span> input<span class="o">$</span>x<span class="p">,</span> y <span class="o">=</span> input<span class="o">$</span>y<span class="p">,</span> color <span class="o">=</span> input<span class="o">$</span>z<span class="p">))</span> <span class="o">+</span>
      geom_point<span class="p">(</span>alpha <span class="o">=</span> input<span class="o">$</span>alpha<span class="p">,</span> size <span class="o">=</span> input<span class="o">$</span>size<span class="p">)</span> <span class="o">+</span>
      labs<span class="p">(</span>title <span class="o">=</span> isolate<span class="p">({</span>toTitleCase<span class="p">(</span>input<span class="o">$</span>plot_title<span class="p">)})</span> <span class="p">)</span>
  <span class="p">})</span>

<span class="p">}</span>

<span class="c1"># Create a Shiny app object</span>
shinyApp<span class="p">(</span>ui <span class="o">=</span> ui<span class="p">,</span> server <span class="o">=</span> server<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="Isolate" src="../../shiny-img/isolate.png" title="Isolate" /></p>
<p>In the following example an <code>eventReactive()</code> function is used to wait until an <code>actionButton()</code> is clicked to update the plot title:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>tools<span class="p">)</span>
<span class="kp">load</span><span class="p">(</span><span class="kp">url</span><span class="p">(</span><span class="s">&quot;http://s3.amazonaws.com/assets.datacamp.com/production/course_4850/datasets/movies.Rdata&quot;</span><span class="p">))</span>

<span class="c1"># UI</span>
ui <span class="o">&lt;-</span> fluidPage<span class="p">(</span>
  sidebarLayout<span class="p">(</span>

    <span class="c1"># Input</span>
    sidebarPanel<span class="p">(</span>

      <span class="c1"># Select variable for y-axis</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;y&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Y-axis:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IMDB rating&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;IMDB number of votes&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_num_votes&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Score&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Score&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Runtime&quot;</span> <span class="o">=</span> <span class="s">&quot;runtime&quot;</span><span class="p">),</span> 
                  selected <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">),</span>

      <span class="c1"># Select variable for x-axis</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;X-axis:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IMDB rating&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;IMDB number of votes&quot;</span> <span class="o">=</span> <span class="s">&quot;imdb_num_votes&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Score&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Score&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_score&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Runtime&quot;</span> <span class="o">=</span> <span class="s">&quot;runtime&quot;</span><span class="p">),</span> 
                  selected <span class="o">=</span> <span class="s">&quot;critics_score&quot;</span><span class="p">),</span>

      <span class="c1"># Select variable for color</span>
      selectInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;z&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Color by:&quot;</span><span class="p">,</span>
                  choices <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Title Type&quot;</span> <span class="o">=</span> <span class="s">&quot;title_type&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Genre&quot;</span> <span class="o">=</span> <span class="s">&quot;genre&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;MPAA Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;mpaa_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Critics Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;critics_rating&quot;</span><span class="p">,</span> 
                              <span class="s">&quot;Audience Rating&quot;</span> <span class="o">=</span> <span class="s">&quot;audience_rating&quot;</span><span class="p">),</span>
                  selected <span class="o">=</span> <span class="s">&quot;mpaa_rating&quot;</span><span class="p">),</span>

      <span class="c1"># Set alpha level</span>
      sliderInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;alpha&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Alpha:&quot;</span><span class="p">,</span> 
                  min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">1</span><span class="p">,</span> 
                  value <span class="o">=</span> <span class="m">0.5</span><span class="p">),</span>

      <span class="c1"># Set point size</span>
      sliderInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;size&quot;</span><span class="p">,</span> 
                  label <span class="o">=</span> <span class="s">&quot;Size:&quot;</span><span class="p">,</span> 
                  min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">5</span><span class="p">,</span> 
                  value <span class="o">=</span> <span class="m">2</span><span class="p">),</span>

      <span class="c1"># Enter text for plot title</span>
      textInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;plot_title&quot;</span><span class="p">,</span> 
                label <span class="o">=</span> <span class="s">&quot;Plot title&quot;</span><span class="p">,</span> 
                placeholder <span class="o">=</span> <span class="s">&quot;Enter text to be used as plot title&quot;</span><span class="p">),</span>

      <span class="c1"># Action button for plot title</span>
      actionButton<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;update_plot_title&quot;</span><span class="p">,</span> 
          label <span class="o">=</span> <span class="s">&quot;Update plot title&quot;</span><span class="p">)</span>

    <span class="p">),</span>

    <span class="c1"># Output:</span>
    mainPanel<span class="p">(</span>
      plotOutput<span class="p">(</span>outputId <span class="o">=</span> <span class="s">&quot;scatterplot&quot;</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Define server function required to create the scatterplot-</span>
server <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">,</span> session<span class="p">)</span> <span class="p">{</span>

  <span class="c1"># New plot title</span>
  new_plot_title <span class="o">&lt;-</span> eventReactive<span class="p">(</span>input<span class="o">$</span>update_plot_title<span class="p">,</span> 
                       <span class="p">{</span> toTitleCase<span class="p">(</span>input<span class="o">$</span>plot_title<span class="p">)</span> <span class="p">}</span>
                       <span class="p">)</span>

  <span class="c1"># Create scatterplot object the plotOutput function is expecting </span>
  output<span class="o">$</span>scatterplot <span class="o">&lt;-</span> renderPlot<span class="p">({</span>
    ggplot<span class="p">(</span>data <span class="o">=</span> movies<span class="p">,</span> aes_string<span class="p">(</span>x <span class="o">=</span> input<span class="o">$</span>x<span class="p">,</span> y <span class="o">=</span> input<span class="o">$</span>y<span class="p">,</span> color <span class="o">=</span> input<span class="o">$</span>z<span class="p">))</span> <span class="o">+</span>
      geom_point<span class="p">(</span>alpha <span class="o">=</span> input<span class="o">$</span>alpha<span class="p">,</span> size <span class="o">=</span> input<span class="o">$</span>size<span class="p">)</span> <span class="o">+</span>
      labs<span class="p">(</span>title <span class="o">=</span> new_plot_title<span class="p">()</span> <span class="p">)</span>
  <span class="p">})</span>

<span class="p">}</span>

<span class="c1"># Create a Shiny app object</span>
shinyApp<span class="p">(</span>ui <span class="o">=</span> ui<span class="p">,</span> server <span class="o">=</span> server<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="eventReactive" src="../../shiny-img/eventReactive.png" title="eventReactive" /></p>
<p>In the following example, <code>observeEvent()</code> is used to make things happen when an action button is clicked: a message is printed to the console stating how many records are shown and a table is generated with those records. The table output is only printed when action button is clicked, but not when other inputs that go into the creation of that output changes thanks to the <code>isolate()</code> function.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>
<span class="kp">load</span><span class="p">(</span><span class="kp">url</span><span class="p">(</span><span class="s">&quot;http://s3.amazonaws.com/assets.datacamp.com/production/course_4850/datasets/movies.Rdata&quot;</span><span class="p">))</span>

<span class="c1"># UI</span>
ui <span class="o">&lt;-</span> fluidPage<span class="p">(</span>
  sidebarLayout<span class="p">(</span>

    <span class="c1"># Input</span>
    sidebarPanel<span class="p">(</span>

      <span class="c1"># Numeric input for number of rows to show</span>
      numericInput<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;n_rows&quot;</span><span class="p">,</span>
                   label <span class="o">=</span> <span class="s">&quot;How many rows do you want to see?&quot;</span><span class="p">,</span>
                   value <span class="o">=</span> <span class="m">10</span><span class="p">),</span>

      <span class="c1"># Action button to show</span>
      actionButton<span class="p">(</span>inputId <span class="o">=</span> <span class="s">&quot;button&quot;</span><span class="p">,</span> 
                   label <span class="o">=</span> <span class="s">&quot;Show&quot;</span><span class="p">)</span>

    <span class="p">),</span>

    <span class="c1"># Output:</span>
    mainPanel<span class="p">(</span>
      tableOutput<span class="p">(</span>outputId <span class="o">=</span> <span class="s">&quot;datatable&quot;</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Define server function required to create the scatterplot-</span>
server <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">,</span> session<span class="p">)</span> <span class="p">{</span>

  <span class="c1"># Print a message to the console every time button is pressed</span>
  observeEvent<span class="p">(</span>input<span class="o">$</span>button<span class="p">,</span> <span class="p">{</span>
    <span class="kp">cat</span><span class="p">(</span><span class="s">&quot;Showing&quot;</span><span class="p">,</span> input<span class="o">$</span>n_rows<span class="p">,</span> <span class="s">&quot;rows\n&quot;</span><span class="p">)</span>
  <span class="p">})</span>
  <span class="c1"># Take a reactive dependency on input$button, </span>
  <span class="c1"># but not on any of the stuff inside the function</span>
  df <span class="o">&lt;-</span> eventReactive<span class="p">(</span>input<span class="o">$</span>button<span class="p">,</span> <span class="p">{</span>
    <span class="kp">head</span><span class="p">(</span>movies<span class="p">,</span> input<span class="o">$</span>n_rows<span class="p">)</span>
  <span class="p">})</span>
  output<span class="o">$</span>datatable <span class="o">&lt;-</span> renderTable<span class="p">({</span>
    df<span class="p">()</span>
  <span class="p">})</span>

<span class="p">}</span>

<span class="c1"># Create a Shiny app object</span>
shinyApp<span class="p">(</span>ui <span class="o">=</span> ui<span class="p">,</span> server <span class="o">=</span> server<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="observeEvent" src="../../shiny-img/observeEvent.png" title="observeEvent" /></p>
<h2 id="reactivity-summary">Reactivity Summary<a class="headerlink" href="#reactivity-summary" title="Permanent link">&para;</a></h2>
<ol>
<li>Reactives are equivalent to no argument functions. Think about them as functions, think about them as variables that can depend on user input and other reactives.</li>
<li>Reactives are for reactive values and expressions, observers are for their side effects.</li>
<li>Do not define a <code>reactive()</code> inside a <code>render*()</code> function.</li>
<li>Be careful with missing parentheses when calling reactive expressions.</li>
</ol>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>

ui <span class="o">&lt;-</span> fluidPage<span class="p">(</span>
  titlePanel<span class="p">(</span><span class="s">&quot;Add 2&quot;</span><span class="p">),</span>
  sidebarLayout<span class="p">(</span>
    sidebarPanel<span class="p">(</span> sliderInput<span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;Select x&quot;</span><span class="p">,</span> min <span class="o">=</span> <span class="m">1</span><span class="p">,</span> max <span class="o">=</span> <span class="m">50</span><span class="p">,</span> value <span class="o">=</span> <span class="m">30</span><span class="p">)</span> <span class="p">),</span>
    mainPanel<span class="p">(</span> textOutput<span class="p">(</span><span class="s">&quot;x_updated&quot;</span><span class="p">)</span> <span class="p">)</span>
  <span class="p">)</span>
<span class="p">)</span>

add_2 <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span> x <span class="o">+</span> <span class="m">2</span> <span class="p">}</span>

server <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">)</span> <span class="p">{</span>
  current_x        <span class="o">&lt;-</span> reactive<span class="p">({</span>add_2<span class="p">(</span>input<span class="o">$</span>x<span class="p">)})</span>
  output<span class="o">$</span>x_updated <span class="o">&lt;-</span> renderText<span class="p">({</span> current_x<span class="p">()</span> <span class="p">})</span>
<span class="p">}</span>

shinyApp<span class="p">(</span>ui<span class="p">,</span> server<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="Addition" src="../../shiny-img/addition.PNG" title="Addition" /></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../input-output/" title="Inputs, outputs, and rendering functions" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Inputs, outputs, and rendering functions
              </span>
            </div>
          </a>
        
        
          <a href="../custom/" title="Customizing appearance" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Customizing appearance
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-6940329b9f.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
      
        <script src="../../js/mathjaxhelper.js"></script>
      
    
    
      
    
  </body>
</html>